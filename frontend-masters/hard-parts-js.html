<!DOCTYPE html>
<html lang="en-US">
  <head><meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Javascript: The Hard Parts, v2 |wizardunicorn.ninja</title><meta name="description" content="These are notes from the 'Javascript':' The Hard Parts, v2' course on Frontend Masters."><link rel="shortcut icon" type="image/ico"href=""><link rel="icon" type="image/png"href="/assets/uswds/img/favicons/favicon.png"><link rel="icon" type="image/png"sizes="192x192"href="/assets/uswds/img/favicons/favicon-192.png"><link rel="apple-touch-icon-precomposed" type=""href="/assets/uswds/img/favicons/favicon-57.png"><link rel="apple-touch-icon-precomposed" type=""sizes="72x72"href="/assets/uswds/img/favicons/favicon-72.png"><link rel="apple-touch-icon-precomposed" type=""sizes="114x114"href="/assets/uswds/img/favicons/favicon-114.png"><link rel="apple-touch-icon-precomposed" type=""sizes="144x144"href="/assets/uswds/img/favicons/favicon-144.png"><link rel="stylesheet"
  href="/assets/css/main.css"
  media="screen"><!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-183755378-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-183755378-1', { 'anonymize_ip': true, 'forceSSL': true });
</script></head>
  <body class=" "><a class="usa-skipnav" href="#main-content">Skip to main content</a>
<header class="usa-header usa-header-extended" role="banner" id="usa-header"><div class="usa-navbar">
      <button class="usa-menu-btn">Menu</button>
      <div class="usa-logo" id="extended-mega-logo">
        <a href="/" title="Home"><img class="usa-logo-img" src="/assets/img/wizardunicornninja.svg" alt="Wizard Unicorn Ninja"><em class="usa-logo-text">
            wizardunicorn.ninja
          </em>
        </a>
      </div>
    </div>

    <nav role="navigation" class="usa-nav">
      <div class="usa-nav-inner">
        <button class="usa-nav-close">
          <img src="/assets/uswds/img/close.svg" alt="close">
        </button><ul class="usa-nav-primary usa-accordion"><li><a class="usa-nav-link" href="/resources/">
                <span>Resources</span>
              </a></li><li><a class="usa-nav-link" href="/frontend-masters/">
                <span>Frontend Masters Workshop Notes</span>
              </a></li><li><button class="usa-accordion-button usa-nav-link" aria-expanded="false" aria-controls="nav-3">
              <span>Sitecore Workshop Notes</span>
            </button><ul id="nav-3" class="usa-nav-submenu" aria-hidden="true"><li>
                  <a href="/sitecore/jss">Sitecore JSS Fundamentals</a>
                </li></ul></li></ul><div class="usa-nav-secondary"><ul class="usa-unstyled-list usa-nav-secondary-links"><li>
                  <a href="">
                    
                  </a>
                </li></ul>
          </div></div>
      </div>
    </nav><div class="main-top">
      <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
      </div>
    </div>
  </header>
  <div class="usa-overlay"></div><main id="main-content"class="usa-grid usa-section usa-content usa-layout-docs">
          <div class="usa-layout-docs-main_content"><h1>Javascript: The Hard Parts, v2</h1><h2 id="introduction">Introduction</h2>

<p><a href="https://static.frontendmasters.com/resources/2019-09-18-javascript-hard-parts-v2/javascript-hard-parts-v2.pdf">The link to the course document is here</a></p>

<p>The instructor breaks down the difference between Junior, Mid and Senior-Level developers, and the purpose of the course for the different levels of developers.</p>

<h2 id="javascript-principles">JavaScript Principles</h2>

<h3 id="thread-of-execution">Thread of Execution</h3>

<p>When JavaScript runs, it:</p>

<ul>
  <li>
    <p>Goes through code line-by-line and runs/’executes’ each line - known as the thread of execution</p>
  </li>
  <li>
    <p>Saves ‘data’ like strings and arrays so we can use that data later - in its memory</p>
  </li>
  <li>
    <p>We can even save code (functions)</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// define a variable and assign it the number 3</span>

<span class="kd">function</span> <span class="nx">multiplyBy2</span> <span class="p">(</span><span class="nx">inputNumber</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// defining the function</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">inputNumber</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span> 
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="nx">multiplyBy2</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span> <span class="c1">// declare a constant and define it to a function call</span>
<span class="kd">const</span> <span class="nx">newOutput</span> <span class="o">=</span> <span class="nx">multiplyBy2</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// declare a constant and define it to a function call</span></code></pre></figure>

<p>Memory is the place in which we store data.</p>

<h3 id="functions">Functions</h3>

<p>A function being run is like a miniature program. We need the code and the memory to run a function.</p>

<p>A function is code we save (‘define’) functions &amp; can use (call/invoke/execute/run) later with the functions name &amp; ()</p>

<p>Execution context is created to run the code of a function. It has 2 parts:</p>

<ul>
  <li>
    <p>Thread of execution</p>
  </li>
  <li>
    <p>Memory</p>
  </li>
</ul>

<p>The first thing that happens when a function is run is a new execution context is established and the parameters and their arguments are stored in local memory. i.e. <code class="language-plaintext highlighter-rouge">inputNumber: 3</code></p>

<p>JavaScript contains a single thread of execution, which means that you can only do one thing at a time (unless you are running your code asynchronously).</p>

<h3 id="call-stack">Call Stack</h3>

<ul>
  <li>
    <p>JavaScript keeps track of what function is currently running. i.e. where is the thread of execution</p>
  </li>
  <li>
    <p>Run a function - add to call stack</p>
  </li>
  <li>
    <p>Finish running the function - JS removes it from the call stack</p>
  </li>
  <li>
    <p>Whatever is at the top of the call stack is the function that is currently being run</p>
  </li>
</ul>

<h2 id="functions--callbacks">Functions &amp; Callbacks</h2>

<h3 id="generalized-functions">Generalized Functions</h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">tenSquared</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">10</span><span class="o">*</span><span class="mi">10</span>
<span class="p">}</span></code></pre></figure>

<p>The above function is not generic enough, if we wanted to square other numbers, we would have to rewrite the function for each number we would want to square.</p>

<p>Don’t Repeat Yourself!</p>

<p>How could we make the function more generic?</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">squareNum</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num</span><span class="o">*</span><span class="nx">num</span>
<span class="p">}</span></code></pre></figure>

<p>With the above function, you could now pass any number and it would return the square of that number <code class="language-plaintext highlighter-rouge">num*num</code></p>

<p>Generalizing functions:</p>

<p>‘Parameters’ (placeholders) mean we don’t need to decide what data to run our functionality on until we run the function</p>

<ul>
  <li>Then provide an actual value (‘argument’) when we run the function</li>
</ul>

<p>Higher order functions follow the same principle</p>

<ul>
  <li>We may not want to decide exactly what some of our functionality is until we run our function</li>
</ul>

<h3 id="repeating-functionality">Repeating Functionality</h3>

<p>This lesson walks through a function, further driving home the points above about execution context and return values being passed to global memory.</p>

<h3 id="higher-order-functions">Higher Order Functions</h3>

<p>A better, more general, way to implement a function could be:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">copyArrayAndManipulate</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">instructions</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">output</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">instructions</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">output</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">multiplyBy2</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">input</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">copyArrayAndManipulate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="nx">multiplyBy2</span><span class="p">);</span></code></pre></figure>

<h3 id="higher-order-functions-example">Higher Order Functions Example</h3>

<p>The example used in the section is the above code block. Just walking through each step of the execution context from global through the call stack as it is updated by calling functions.</p>

<h3 id="higher-order-functions-qa">Higher Order Functions Q&amp;A</h3>

<p>No notes</p>

<h3 id="callbacks--higher-order-functions">Callbacks &amp; Higher Order Functions</h3>

<p>Functions in JavaScript are first class objects. They can coexist with and be treated like any other JavaScript object:</p>

<ol>
  <li>
    <p>Assigned to variables and properties of other objects</p>
  </li>
  <li>
    <p>Passed as arguments into functions</p>
  </li>
  <li>
    <p>Returned as values from functions</p>
  </li>
</ol>

<p>A callback function is a function that is placed inside of a Higher Order Function.</p>

<p>A Higher Order Function is defined as: A function that takes in OR passes out (returns) a function.</p>

<p>Callbacks and Higher Order Functions simplify code and keep it DRY</p>

<ul>
  <li>
    <p>Declarative, readable code: Map, filter, reduce - the most readable way to write code to work with data</p>
  </li>
  <li>
    <p>Asynchronous JavaScript: Callbacks are a core aspect of async JavaScript and are under the hood of promises, async/await</p>
  </li>
</ul>

<h3 id="arrow-functions">Arrow Functions</h3>

<p>Arrow functions are a shorthand way to save functions</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">multiplyBy2</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">input</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">//  in an arrow function, becomes</span>

<span class="kd">const</span> <span class="nx">multiplyBy2</span> <span class="o">=</span> <span class="nx">input</span> <span class="o">=&gt;</span> <span class="nx">input</span><span class="o">*</span><span class="mi">2</span></code></pre></figure>

<p>Under the hood, JavaScript will put in parenthesis, curly brackets, and a return statement if your function only has one return.</p>

<p>Anonymous and arrow functions</p>

<ul>
  <li>
    <p>Improve the immediate legibility of code</p>
  </li>
  <li>
    <p>…but they are merely ‘syntactic sugar’</p>
  </li>
  <li>
    <p>Understanding how they work ‘under the hood’ is vital to avoid confusion</p>
  </li>
</ul>

<h3 id="pair-programming">Pair Programming</h3>

<p>Pair programming is the most effective way to grow as an engineer, because:</p>

<ul>
  <li>
    <p>You get to tackle blocks (issues) with a partner</p>
  </li>
  <li>
    <p>Stay focused on the problem</p>
  </li>
  <li>
    <p>Refine technical communication</p>
  </li>
  <li>
    <p>Collaborate to solve the problem</p>
  </li>
</ul>

<h2 id="closure">Closure</h2>

<h3 id="closure-introduction">Closure Introduction</h3>

<ul>
  <li>
    <p>Closure is the most esoteric of JavaScript concepts - If you really understand it, you understand JavaScript well</p>
  </li>
  <li>
    <p>Enables powerful ‘pro-level’ functions like ‘once’ and ‘memoize’</p>
  </li>
  <li>
    <p>Many JavaScript design patterns including the module pattern use closure</p>
  </li>
  <li>
    <p>Build iterators, handle partial application, and maintain state in an asynchronous world</p>
  </li>
</ul>

<p>Every time a function gets invoked, it creates a new store of memory (in its execution context)…but</p>

<p>Functions with memories!</p>

<ul>
  <li>
    <p>When our function gets called, we create a live store of data (local memory/variable environment/state) for that functions execution context</p>
  </li>
  <li>
    <p>When the function finished executing, its local memory is deleted (except for the returned value)</p>
  </li>
  <li>
    <p>But what if the function could hold on to live data between executions?</p>
  </li>
  <li>
    <p>This would let function definitions have an associated cache/persistent memory</p>
  </li>
  <li>
    <p>But it all starts with returning a function from another function</p>
  </li>
</ul>

<h3 id="returning-functions">Returning Functions</h3>

<p>Returning a function from another function</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">createFunction</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">multiplyBy2</span> <span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">num</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">multiplyBy2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">generatedFunc</span> <span class="o">=</span> <span class="nx">createFunction</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">generatedFunc</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// 6</span></code></pre></figure>

<h3 id="nested-function-scope">Nested Function Scope</h3>

<p>Calling a function in the same function call as it was defined:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">outer</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">incrementCounter</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">counter</span> <span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">incrementCounter</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">outer</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">myNewFunction</span> <span class="o">=</span> <span class="nx">outer</span><span class="p">();</span>
<span class="nx">myNewFunction</span><span class="p">();</span>
<span class="nx">myNewFunction</span><span class="p">();</span></code></pre></figure>

<h3 id="retaining-function-memory">Retaining Function Memory</h3>

<p>In the above function definition, when <code class="language-plaintext highlighter-rouge">myNewFunction</code> is assigned to <code class="language-plaintext highlighter-rouge">outer()</code>, the inner function <code class="language-plaintext highlighter-rouge">incrementCounter()</code> is saved to it, including the parent scope of <code class="language-plaintext highlighter-rouge">outer()</code>, which allows access to the variable <code class="language-plaintext highlighter-rouge">counter</code>.</p>

<h3 id="function-closure">Function Closure</h3>

<p>Continuing on with the function defined above in the ‘Nested Function Scope’ section, more about calling a function outside of the function call it was assigned is discussed.</p>

<h3 id="closure-qa">Closure Q&amp;A</h3>

<p>If you define variables within the parent function and they are not referenced in the child function, does memory retain those variables? No, the child function will only retain (in global scope) those variable(s) which are directly referenced within the child function definition. Otherwise, there would be memory leaks.</p>

<h3 id="closure-technical-definition--review">Closure Technical Definition &amp; Review</h3>

<p>Recommended reading: ‘If Hemingway Wrote JavaScript’</p>

<p>Where you save your function determines what data it will have access to when it is run.</p>

<p>Persistent Lexically Scoped Referenced Data (P.L.S.R.D) is the term used to describe a child functions access to its parent scope, AKA closure.</p>

<h3 id="multiple-closure-instances">Multiple Closure Instances</h3>

<p>If you store a returned function definition in a variable, you are creating unique instances and (future; at run-time) execution contexts for that function. Following the above example, if you set <code class="language-plaintext highlighter-rouge">var anotherVariable = outer();</code>, anotherVariable would have its own execution context separate from myNewFunction.</p>

<h3 id="practical-applications">Practical Applications</h3>

<p>Closure gives our functions persistent memories and an entirely new toolkit for writing professional code</p>

<ul>
  <li>
    <p>Helper functions: Everyday professional helper functions like ‘once’ and ‘memoize’</p>
  </li>
  <li>
    <p>Iterators and generators: Which use lexical scoping and closure to achieve the most contemporary patterns for handling data in JavaScript</p>
  </li>
  <li>
    <p>Module pattern: Preserve state for the life of an application without polluting the global namespace</p>
  </li>
  <li>
    <p>Asynchronous JavaScript: Callbacks and Promises rely on closure to persist state in an asynchronous environment</p>
  </li>
</ul>

<h3 id="closure-exercises">Closure Exercises</h3>

<p><a href="http://csbin.io/closures">Closure exercises are here</a></p>

<h2 id="asynchronous-javascript">Asynchronous JavaScript</h2>

<h3 id="single-threaded-execution-review">Single Threaded Execution Review</h3>

<p>Promises, Async, and the Event Loop</p>

<ul>
  <li>
    <p>Promises - The most significant ES6 feature</p>
  </li>
  <li>
    <p>Asynchronicity - The feature that makes dynamic web applications possible</p>
  </li>
  <li>
    <p>The Event Loop - JavaScript’s triage</p>
  </li>
  <li>
    <p>Microtask queue, Callback queue, and Web Browser features (APIs) - <a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">here’s an article that goes into further detail</a></p>
  </li>
</ul>

<p>JavaScript is a synchronous language. This means that only one task can be run at a time, or only one line of code is executed at a time.</p>

<h3 id="asynchronicity-in-javascript">Asynchronicity in JavaScript</h3>

<p>Asynchronicity is the backbone of modern web development in JavaScript yet…</p>

<p>JavaScript is:</p>

<ul>
  <li>
    <p>Single threaded (one command runs at a time)</p>
  </li>
  <li>
    <p>Synchronously executed (each line is run in the order it appears in the code)</p>
  </li>
</ul>

<p>So what if we have a task:</p>

<ul>
  <li>
    <p>Accessing Twitter’s server to get new tweets that takes a long time</p>
  </li>
  <li>
    <p>Code we want to run using those tweets</p>
  </li>
</ul>

<p>Challenge: We want to wait for the tweets to be stores in tweets so that they’re there to run displayTweets on - but no code can run in the meantime</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Slow function blocks further code from running</span>

<span class="kd">const</span> <span class="nx">tweets</span> <span class="o">=</span> <span class="nx">getTweets</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://twitter.com/potus</span><span class="dl">"</span><span class="p">)</span>

<span class="c1">// 350ms wait while the request is sent to Twitter servers</span>

<span class="nx">displayTweets</span><span class="p">(</span><span class="nx">tweets</span><span class="p">)</span>

<span class="c1">// more code to run</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">I am waiting for getTweets...</span><span class="dl">'</span><span class="p">)</span></code></pre></figure>

<p>JavaScript is not enough - we need new pieces (some of which are not JavaScript at all)</p>

<p>Our core JavaScript engine has 3 main parts:</p>

<ul>
  <li>
    <p>Thread of execution</p>
  </li>
  <li>
    <p>Memory / Variable Environment</p>
  </li>
  <li>
    <p>Call stack</p>
  </li>
</ul>

<p>We need to add some new components:</p>

<ul>
  <li>
    <p>Web Browser APIs / Node background APIs</p>
  </li>
  <li>
    <p>Promises</p>
  </li>
  <li>
    <p>Event Loop, Callback / Task queue, and micro task queue</p>
  </li>
</ul>

<h3 id="asynchronous-browser-features">Asynchronous Browser Features</h3>

<p>ES5 Solution: Introducing Callback Functions and Web Browser APIs</p>

<p>Web Browsers have Dev Tools (Console), Sockets, the ability to make Network Requests, and they can Render the HTML DOM (Document Object Model). We cannot (in JavaScript) code for these directly, but JavaScript can interface with them. JavaScript has ‘labels’ for each of the web browser ‘features’, that allow JavaScript to interact with them. i.e. setTimeout can use the browsers ‘timer’ function. ‘document’ is another web browser feature that allows JavaScript to interact with it.</p>

<h3 id="web-api-example">Web API Example</h3>

<p>This section is focused on setTimeout which is not a feature of JavaScript, but a way for JavaScript to interface with a web browser(s) <code class="language-plaintext highlighter-rouge">timer</code> API - <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout">more details on MDN</a></p>

<p><code class="language-plaintext highlighter-rouge">setTimeout</code> takes a number of arguments, but this focused on passing in a function and a number which represents the amount of time, in milliseconds, before the function will run i.e. <code class="language-plaintext highlighter-rouge">setTimeout(myFunction, 1000)</code></p>

<p><code class="language-plaintext highlighter-rouge">setTimeout</code> will start a timer at 0s and when it meets the argument <code class="language-plaintext highlighter-rouge">1000(ms)</code>, it will invoke the function <code class="language-plaintext highlighter-rouge">myFunction</code></p>

<h3 id="web-api-rules">Web API Rules</h3>

<p>This section quickly talks about there being rules between JavaScript and how the browser interacts with it. They are defined as being quite strict and the following JavaScript was displayed as an example to consider:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">printHello</span><span class="p">(){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">);</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">blockFor1Sec</span><span class="p">(){</span>
    <span class="c1">// blocks the JavaScript Thread of Execution for 1 second, maybe with a for loop?</span>
<span class="p">}</span>

<span class="nx">setTimeout</span><span class="p">(</span><span class="nx">printHello</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

<span class="nx">blockFor1Sec</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Me first!</span><span class="dl">"</span><span class="p">);</span></code></pre></figure>

<p>What will happen?!</p>

<h3 id="callback-queue--event-loop">Callback Queue &amp; Event Loop</h3>

<p>Walking through the above JavaScript, this is what happens:</p>

<ol>
  <li>Define function <code class="language-plaintext highlighter-rouge">printHello</code></li>
  <li>Define function <code class="language-plaintext highlighter-rouge">blockFor1Sec</code></li>
  <li>Run <code class="language-plaintext highlighter-rouge">setTimeout</code> Browser Feature, passing in the <code class="language-plaintext highlighter-rouge">printHello</code> function with <code class="language-plaintext highlighter-rouge">0ms</code> passed in as the time argument. This adds the <code class="language-plaintext highlighter-rouge">printHello</code> function into the Callback Queue</li>
  <li>Call <code class="language-plaintext highlighter-rouge">blockFor1Sec</code> function</li>
  <li>The <code class="language-plaintext highlighter-rouge">console.log</code> prints</li>
  <li>Finally, the <code class="language-plaintext highlighter-rouge">printHello</code> function is executed</li>
</ol>

<p>The Callback Queue is not allowed to run all regular code is run first. JavaScript checks if the Call Stack is empty before checking the Callback Queue. This is known as the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop">Event Loop</a>.</p>

<h3 id="callback-queue--event-loop-qa">Callback Queue &amp; Event Loop Q&amp;A</h3>

<p>Q: Does the Event Loop constantly run?</p>

<p>A: Yes, the Event Loop is constantly running for the duration of the applications lifecycle</p>

<h3 id="callback-hell--async-exercises">Callback Hell &amp; Async Exercises</h3>

<p>ES5 Web Browser APIs with Callback Functions</p>

<p>Problems:</p>

<ul>
  <li>
    <p>Our response data is only available in the callback function - Callback Hell (where we are doing all of our work on some data inside of a function)</p>
  </li>
  <li>
    <p>Maybe it feels a little odd to think of passing a function into another function only for it to run much later</p>
  </li>
</ul>

<p>Benefits:</p>

<ul>
  <li>Super explicit once you understand how it works under-the-hood</li>
</ul>

<p><a href="csbin.io/async">Exercises</a></p>

<h2 id="promises">Promises</h2>

<h3 id="promises-introduction">Promises Introduction</h3>

<p>ES6+ Solution (Promises)</p>

<p>Using two-pronged ‘facade’ functions that both:</p>

<ul>
  <li>
    <p>Initiate background web browser work</p>
  </li>
  <li>
    <p>Return a placeholder object (promise) immediately in JavaScript</p>
  </li>
</ul>

<p>In ES6, <code class="language-plaintext highlighter-rouge">fetch</code> is the replacement for <code class="language-plaintext highlighter-rouge">xhr</code>, but unlike <code class="language-plaintext highlighter-rouge">xhr</code>, <code class="language-plaintext highlighter-rouge">fetch</code> (referred to above as a ‘two-pronged’ facade function) will both initiate a Web Browser function and in the JavaScript environment create a placeholder object called a <code class="language-plaintext highlighter-rouge">promise object</code>. When the network request completes, the object will be filled in with the result. The Web Browser function and the placeholder object are intrinsically linked.</p>

<p>ES6+ Promises</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">display</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">futureData</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://twitter.com/username/tweets/1</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">futureData</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">display</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Me first!</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<h3 id="promises-example-fetch">Promises Example: fetch</h3>

<p>In the example above, the following is happening:</p>

<ol>
  <li>
    <p>Declare a function <code class="language-plaintext highlighter-rouge">display</code></p>
  </li>
  <li>
    <p>Declare a constant <code class="language-plaintext highlighter-rouge">futureData</code> and store the result of <code class="language-plaintext highlighter-rouge">fetch(...)</code>. This will immediately return a ‘Promise Object’ with two properties; {value: undefined, onFulfilled: []} and store it in the <code class="language-plaintext highlighter-rouge">futureData</code> constant. The other consequence of <code class="language-plaintext highlighter-rouge">fetch(...)</code> will be in the Web Browser in the form of a Network Request. The Network Request requires the URL and path, which is defined. The Network Request defaults to a <code class="language-plaintext highlighter-rouge">GET</code> request, but you can pass in (as an argument) another type of request, i.e. <code class="language-plaintext highlighter-rouge">POST</code>. The response from the Network Request gets stored in the <code class="language-plaintext highlighter-rouge">futureData</code> object that was created, specifically in the <code class="language-plaintext highlighter-rouge">value</code> property of that object.</p>
  </li>
</ol>

<h3 id="promises-example-then">Promises Example: then</h3>

<ol>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">onFulfilled</code> array in the <code class="language-plaintext highlighter-rouge">futureData</code> object contains a number of [hidden] methods (which are ‘directly’ inaccessible), but can be accessed with ‘key’ words, in this case <code class="language-plaintext highlighter-rouge">then</code>. passing the <code class="language-plaintext highlighter-rouge">display</code> function into <code class="language-plaintext highlighter-rouge">futureData.then()</code> will automatically pass the content of <code class="language-plaintext highlighter-rouge">futureData.value</code> into the <code class="language-plaintext highlighter-rouge">display</code> function defined on the first line.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">console.log('Me first!')</code> will finally run and print <code class="language-plaintext highlighter-rouge">Me first!</code> in the console.</p>
  </li>
  <li>
    <p>The Network Request has successfully completed and the response is stored in <code class="language-plaintext highlighter-rouge">futureData.value</code>. This will trigger the <code class="language-plaintext highlighter-rouge">...then(display)</code> and pass in <code class="language-plaintext highlighter-rouge">futureData.value</code> as the argument for the <code class="language-plaintext highlighter-rouge">display</code> function. A new execution context is created for the <code class="language-plaintext highlighter-rouge">display</code> function. <code class="language-plaintext highlighter-rouge">futureData.value</code> will be stored as <code class="language-plaintext highlighter-rouge">data</code> in the <code class="language-plaintext highlighter-rouge">display</code> function.</p>
  </li>
</ol>

<h3 id="web-apis--promises-example-fetch">Web APIs &amp; Promises Example: fetch</h3>

<p>It is important to understand how promise-deferred functionality gets back into JavaScript to be run</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">display</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)}</span>
<span class="kd">function</span> <span class="nx">printHello</span><span class="p">(){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">);}</span>
<span class="kd">function</span> <span class="nx">blockFor300ms</span><span class="p">(){</span><span class="c1">// blocks js thread for 300ms}</span>

<span class="nx">setTimeout</span><span class="p">(</span><span class="nx">printHello</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">futureData</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://twitter.com/username/tweets/1</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">futureData</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">display</span><span class="p">)</span>

<span class="nx">blockFor300ms</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Me first!</span><span class="dl">"</span><span class="p">);</span></code></pre></figure>

<p><em>The <code class="language-plaintext highlighter-rouge">then</code> method and its functionality to call on completion</em></p>

<ul>
  <li>
    <p>Any code we want to run on the returned data must also be saved on the promise object</p>
  </li>
  <li>
    <p>Added using the <code class="language-plaintext highlighter-rouge">.then</code> method to the hidden property <code class="language-plaintext highlighter-rouge">onFulfillment</code></p>
  </li>
  <li>
    <p>Promise objects will automatically trigger the attached function to run (with its input being the returned data)</p>
  </li>
</ul>

<p>Asynchronous JavaScript is defined as executing code out of the order in which it was written.</p>

<h3 id="web-apis--promises-example-then">Web APIs &amp; Promises Example: then</h3>

<p>Walking through the above JavaScript block, the <code class="language-plaintext highlighter-rouge">.then</code> eventually ‘GET(s)’ data back from its request and…</p>

<h3 id="web-apis--promises-example-microtask-queue">Web APIs &amp; Promises Example: Microtask Queue</h3>

<p>When finally, all of the code in the global scope has executed, the Event Loop checks the Callback and Microtask Queue(s) for additional tasks waiting to be run. <code class="language-plaintext highlighter-rouge">fetch</code> placed the Network Request into the Microtask Queue, which is where the Event Loop first checks for tasks, which then triggers the <code class="language-plaintext highlighter-rouge">.then</code>. Finally, the Event Loop is able to reach the Callback Queue which contains the <code class="language-plaintext highlighter-rouge">setTimeout</code>. So while the <code class="language-plaintext highlighter-rouge">setTimeout</code> function was called first, it in fact gets run last because of the order of the Call Stack, Event Loop, Microtask Queue, and Callback Queue(s). Any function that is attached to a promise object gets stored in the Microtask Queue, which is the first Queue that the JavaScript Event Loop checks, before the Callback Queue.</p>

<h3 id="promises-and-asynchronous-qa">Promises and Asynchronous Q&amp;A</h3>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/API">List of Web APIs</a></p>

<p>Specific to this section, the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope">WorkerGlobalScope Web API</a> contains <code class="language-plaintext highlighter-rouge">fetch</code>.</p>

<p>The Microtask Queue, once the Event Loop enters it, will continue to run any functions that are waiting in the queue until there are not functions left to run.</p>

<p>Any function that is attached to a promise object gets pushed into the Microtask Queue, any function that is directly tied to a Browser Feature or returns a function, gets pushed into the Callback Queue.</p>

<h3 id="promises-review">Promises Review</h3>

<p>Problems:</p>

<ul>
  <li>
    <p>99% of developers have no idea how they’re working under the hood</p>
  </li>
  <li>
    <p>Debugging becomes super-hard as a result</p>
  </li>
  <li>
    <p>Developers fail technical interviews</p>
  </li>
</ul>

<p>Benefits:</p>

<ul>
  <li>
    <p>Cleaner readable style with pseudo-synchronous style code</p>
  </li>
  <li>
    <p>Nice error handling process</p>
  </li>
</ul>

<p><em>We have rules for the execution of asynchronously delayed code</em></p>

<ul>
  <li>
    <p>Hold promise-deferred functions in a microtask queue and callback function in a task queue (Callback queue) when the Web Browser Feature (API) finishes</p>
  </li>
  <li>
    <p>Add the function to the Call stack (i.e. execute the function) when:</p>
  </li>
  <li>
    <p>The Call stack is empty AND all global code has run (the Event Loop checks this condition)</p>
  </li>
  <li>
    <p>Prioritize functions in the microtask queue over the Callback queue</p>
  </li>
</ul>

<p><em>Promises, Web APIs, the Callback &amp; Microtask Queues, and Event Loop enable:</em></p>

<ul>
  <li>
    <p>Non-blocking applications: This means we don’t have to wait in the single thread and don’t block further code from running</p>
  </li>
  <li>
    <p>However long it takes: We cannot predict when our Browser feature’s work will finish so we let JavaScript handle automatically running the function on its completion</p>
  </li>
  <li>
    <p>Web applications: Asynchronous JavaScript is the backbone of the modern web - letting us build fast ‘non-blocking’ applications</p>
  </li>
</ul>

<h2 id="classes--prototypes">Classes &amp; Prototypes</h2>

<h3 id="class--oop-introduction">Class &amp; OOP Introduction</h3>

<p><em>Classes, Prototypes - Object Oriented JavaScript</em></p>

<ul>
  <li>
    <p>An enormously popular paradigm for structuring complex code</p>
  </li>
  <li>
    <p>Prototype chain - the feature behind-the-scenes that enables emulation of OOP but is a compelling tool in itself</p>
  </li>
  <li>
    <p>Understanding the difference between <code class="language-plaintext highlighter-rouge">_proto_</code> and <code class="language-plaintext highlighter-rouge">prototype</code></p>
  </li>
  <li>
    <p>the <code class="language-plaintext highlighter-rouge">new</code> and <code class="language-plaintext highlighter-rouge">class</code> keywords as tools to automate our object and method creation</p>
  </li>
</ul>

<p>One of the most popular interview questions for mid to senior-level developers is what is the keyword <code class="language-plaintext highlighter-rouge">new</code> doing under-the-hood</p>

<p><em>Core of development (and running code)</em></p>

<ol>
  <li>
    <p>Save data (e.g. in a quiz game the scores of user1 and user2)</p>
  </li>
  <li>
    <p>Run code (functions) using that data (e.g. increase user2’s score)</p>
  </li>
</ol>

<p>So what?!</p>

<p>In a quiz game you need to save lots of users, but also admins, quiz questions, quiz outcomes, league tables - all have data and associated functionality</p>

<p>In 100,000 lines of code…</p>

<ul>
  <li>
    <p>Where is the functionality when I need it?</p>
  </li>
  <li>
    <p>How do I make sure the functionality is only used on the right data?</p>
  </li>
</ul>

<p><em>Code should be:</em></p>

<ol>
  <li>
    <p>Easy to reason about - Easy to figure out what is going on</p>
  </li>
  <li>
    <p>Easy to add features to (new functionality)</p>
  </li>
  <li>
    <p>Nevertheless efficient and performant</p>
  </li>
</ol>

<p>The Object-oriented paradigm aims to achieve all these goals</p>

<h3 id="object-dot-notation">Object Dot Notation</h3>

<p>How can you store the following data in an app?</p>

<p>user1:
    - name: ‘Tim’
    - score: 3</p>

<p>user2:
    - name: ‘Stephanie’
    - score: 5</p>

<p>In an object!</p>

<p>Objects store functions with their associated data.</p>

<p>This is the principle of encapsulation - and it is going to transform how we can ‘reason about’ code</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">First Name</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">score</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="na">increment</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">user</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="nx">user1</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span> <span class="c1">// user1.score -&gt; 8</span></code></pre></figure>

<h3 id="factory-functions">Factory Functions</h3>

<p>What is a built-in function of JavaScript who’s output will be an empty object?</p>

<p><code class="language-plaintext highlighter-rouge">Object.create</code> which will provide fine-grained control over the object later on.</p>

<p>A potential solution to avoid repeating yourself when creating multiple users would be as follows:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">userCreator</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newUser</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">increment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">newUser</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">newUser</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="nx">userCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Viljar</span><span class="dl">"</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">user2</span> <span class="o">=</span> <span class="nx">userCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Yep</span><span class="dl">"</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nx">user1</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span></code></pre></figure>

<p>The instructor says not to use the above code in practice. The usable version is to follow.</p>

<h3 id="factory-functions-example">Factory Functions Example</h3>

<p>Instructor walks through the above example and mentions that they all share the increment function and if you wanted to add another key value pair to all of the user objects (imagine you have more than 2, but hundreds or more), this would not be practical.</p>

<h3 id="prototype-chain">Prototype Chain</h3>

<p>The ‘better’ way to solve the problem would be to use the Prototype Chain.</p>

<p>Store the increment function in just one object and have the interpreter, if it does not find the function on <code class="language-plaintext highlighter-rouge">user1</code>, look up to that object to check if it is there.</p>

<p>Link <code class="language-plaintext highlighter-rouge">user1</code> and <code class="language-plaintext highlighter-rouge">functionStore</code> so the interpreter, on not finding <code class="language-plaintext highlighter-rouge">.increment</code>, makes sure to check up in <code class="language-plaintext highlighter-rouge">functionStore</code> where it would find it</p>

<p>Make the link with <code class="language-plaintext highlighter-rouge">Object.create()</code> technique.</p>

<p>Expanding on what we’ve seen above, consider the following:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">userCreator</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newUser</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">userFunctionStore</span><span class="p">);</span> <span class="c1">// the argument passed into Object.create creates the 'link' to the object that is passed in as an argument</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">newUser</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">newUser</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">userFunctionStore</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">increment</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;},</span>
    <span class="na">login</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">logged in</span><span class="dl">"</span><span class="p">);}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="nx">userCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Viljar</span><span class="dl">"</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">user2</span> <span class="o">=</span> <span class="nx">userCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Yep</span><span class="dl">"</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="nx">user1</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span></code></pre></figure>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create">MDN Object.create() documentation</a></p>

<h3 id="prototype-chain-example-prototypal-link">Prototype Chain Example: Prototypal Link</h3>

<p>This section walks through the above code.</p>

<p><code class="language-plaintext highlighter-rouge">Object.create(passedObject)</code> will create an implicit link to the passed-in object which will allow the new object to have access to properties that are in the passed-in object without directly having the properties itself.</p>

<h3 id="prototype-chain-example-implicit-parameters">Prototype Chain Example: Implicit Parameters</h3>

<p><code class="language-plaintext highlighter-rouge">this</code> is an implicit parameter. In the case of the code above, in the increment function; <code class="language-plaintext highlighter-rouge">this.score++</code>, <code class="language-plaintext highlighter-rouge">this</code> will be equal to the value that is to the left of the dot, i.e. <code class="language-plaintext highlighter-rouge">user1.increment()</code> will result in <code class="language-plaintext highlighter-rouge">this = user1</code> in the execution context of the <code class="language-plaintext highlighter-rouge">increment</code> function.</p>

<h3 id="hasownproperty-method">hasOwnProperty Method</h3>

<p>What if we want to confirm if a property exists in an object? <code class="language-plaintext highlighter-rouge">hasOwnProperty</code>! i.e. <code class="language-plaintext highlighter-rouge">user1.hasOwnProperty('score')</code>. But does the user1 object have a method <code class="language-plaintext highlighter-rouge">hasOwnProperty</code>? or does the object that it is prototypically linked to <code class="language-plaintext highlighter-rouge">userFunctionStore</code>? no… JavaScript has a set of methods that are available to all objects set in <code class="language-plaintext highlighter-rouge">Object.prototype</code>. In other words, every object in JavaScript has a prototypal link to a set of methods which are defined in <code class="language-plaintext highlighter-rouge">Object.prototype</code>. <code class="language-plaintext highlighter-rouge">user1.hasOwnProperty('score')</code> would return <code class="language-plaintext highlighter-rouge">true</code>.</p>

<h3 id="this-keyword">this Keyword</h3>

<p><code class="language-plaintext highlighter-rouge">this</code> would work fine in the above code block, but consider this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">userFunctionStore</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">increment</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">function</span> <span class="nx">add1</span><span class="p">(){</span> <span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
        <span class="nx">add1</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">this</code> would not evaluate to <code class="language-plaintext highlighter-rouge">user1</code>, but would look in Global Memory for <code class="language-plaintext highlighter-rouge">user1</code> which does not exist, but if you change <code class="language-plaintext highlighter-rouge">add1()</code> to <code class="language-plaintext highlighter-rouge">add1.call(this)</code>, <code class="language-plaintext highlighter-rouge">this</code> would still hold the same value in the execution context of <code class="language-plaintext highlighter-rouge">add1()</code> as it did in the function stored in the label <code class="language-plaintext highlighter-rouge">increment</code></p>

<h3 id="arrow-function-scope--this">Arrow Function Scope &amp; this</h3>

<p>When using an Arrow Function, the value of <code class="language-plaintext highlighter-rouge">this</code> is lexically scoped meaning that the value of <code class="language-plaintext highlighter-rouge">this</code> would remain as it was in the parent scope of the function, which would be <code class="language-plaintext highlighter-rouge">user1</code>.</p>

<h3 id="prototype-chain-review">Prototype Chain Review</h3>

<p>A review of the last few above sections.</p>

<h3 id="new-keyword">new Keyword</h3>

<p>the <code class="language-plaintext highlighter-rouge">new</code>keyword automates the ‘hard work’ of creating objects. When we call the function that returns an object with <code class="language-plaintext highlighter-rouge">new</code> in front of it, it automates 2 things:</p>

<ol>
  <li>
    <p>Create a new object</p>
  </li>
  <li>
    <p>Return the new object</p>
  </li>
</ol>

<p>But now we need to adjust how we write the body of our object creator. How can we:</p>

<ul>
  <li>
    <p>Refer to the auto-created object? The newly generated object will be referred to as <code class="language-plaintext highlighter-rouge">this</code></p>
  </li>
  <li>
    <p>Know where to put single copies of functions?</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">userCreator</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">userCreator</span><span class="p">.</span><span class="nx">prototype</span>
<span class="nx">userCreator</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">increment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">userCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Viljar</span><span class="dl">"</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span></code></pre></figure>

<p>Functions are both objects and functions 🧐</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">multiplyBy2</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num</span><span class="o">*</span><span class="mi">2</span>
<span class="p">}</span>

<span class="nx">multiplyBy2</span><span class="p">.</span><span class="nx">stored</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nx">multiplyBy2</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// 6</span>

<span class="nx">multiplyBy2</span><span class="p">.</span><span class="nx">stored</span> <span class="c1">// 5</span>
<span class="nx">multiplyBy2</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// {}</span></code></pre></figure>

<p>All functions have a default property <code class="language-plaintext highlighter-rouge">prototype</code> on their object version (itself an object). Using a dot on the end of a function, you can get access to the object portion of a function.</p>

<h3 id="new-keyword-example">new Keyword Example</h3>

<p>Walks through this code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">userCreator</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">userCreator</span><span class="p">.</span><span class="nx">prototype</span>
<span class="nx">userCreator</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">increment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">userCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Viljar</span><span class="dl">"</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span></code></pre></figure>

<p>The benefit to using the <code class="language-plaintext highlighter-rouge">new</code> keyword is that it is faster to write and it is often used in practice in professional code.</p>

<p>The problem(s) to using the <code class="language-plaintext highlighter-rouge">new</code> keyword is that 95% of developers have no idea how it works and therefore fail interviews. And… we should uppercase the first letter of the function so we know it requires <code class="language-plaintext highlighter-rouge">new</code> to work!</p>

<h3 id="class-keyword">class Keyword</h3>

<p>In languages other than JavaScript, there is a way to construct the function/object combo (similar to <code class="language-plaintext highlighter-rouge">new</code>), but all at once rather than declaring a function, then assigning functions to labels in the <code class="language-plaintext highlighter-rouge">.prototype</code> object. Using <code class="language-plaintext highlighter-rouge">class</code> allows everything to be declared at once.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">class</span> <span class="nx">UserCreator</span> <span class="p">{</span>
    <span class="kd">constructor</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">score</span><span class="p">){</span> <span class="c1">// same as function userCreator(name, score){...}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">increment</span> <span class="p">(){</span> <span class="k">this</span><span class="p">.</span><span class="nx">score</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// same as userCreator.prototype.increment...</span>
    <span class="nx">login</span> <span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">logged in</span><span class="dl">"</span><span class="p">);</span> <span class="p">}</span> <span class="c1">// same as userCreator.prototype.login...</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserCreator</span><span class="p">(</span><span class="dl">"</span><span class="s2">Viljar</span><span class="dl">"</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="nx">user1</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span></code></pre></figure>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/constructor"><code class="language-plaintext highlighter-rouge">constructor</code> on MDN</a></p>

<p>The benefits of using <code class="language-plaintext highlighter-rouge">class</code> are that it is emerging as the new standard (introduced in ES6) and that it ‘feels’ more like the style of other languages (e.g. Python).</p>

<p>Problems with using <code class="language-plaintext highlighter-rouge">class</code>? 99% of developers have no idea how it works…</p>

<h2 id="wrapping-up">Wrapping Up</h2>

<p>Click <a href="#"><code class="language-plaintext highlighter-rouge">Return to top</code></a> and re-read these notes.</p>

</div>
    </main><footer class="usa-footer usa-footer-medium" role="contentinfo"><div class="usa-grid usa-footer-return-to-top">
      <a href="#">Return to top</a>
    </div><div class="usa-footer-secondary_section">
    <div class="usa-grid">
      <div class="usa-footer-logo"><img class="usa-footer-logo-img" src="/assets/img/hztl-wm.svg" alt="HZTL-WM"><p>William has consumed <span class="la-croix"></span> cans of <a href="/la-croix"><span class="la-croix-logo"></span></a> since Sept. 3rd, 2019.<br/><em class="lighten-up"> * cans of delicious, bubbly, essenced water consumed accurate by ±50%</em></p></div><div class="usa-footer-contact-links usa-width-one-half"></div>
    </div>
  </div></footer><script src="/assets/uswds/js/uswds.min.js"async></script><script src="/assets/js/la-croix.js"></script><script src="/assets/js/scroll-watch.js"></script></body>
</html>
